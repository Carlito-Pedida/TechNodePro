<div>
    <button id="show-reply-form-<%= comment.id %>" class="btn btn-outline-primary btn-sm">
        Reply
    </button>

    <div id="reply-form-container-<%= comment.id %>" style="display: none;">
        <%= form_with(model: [ comment, comment.replies.build ]) do |form| %>
            <p>
                <%= form.label :reply_body, "Add a Comment" %><br/>
                <%= form.text_area :reply_body, class: "form-control shadow-sm" %>
            </p>
            <div class="text-end mb-3">
                <%= form.submit "REPLY", class: "btn btn-outline-info btn-md shadow-sm" %>
                <button type="button" id="cancel-reply-form-<%= comment.id %>" class="btn btn-outline-secondary btn-md shadow-sm">Cancel</button>
            </div>
        <% end %>
    </div>
</div>

<script>
    document.getElementById("show-reply-form-<%= comment.id %>").addEventListener("click", function() {
        var replyForm = document.getElementById("reply-form-container-<%= comment.id %>");
        var replyButton = document.getElementById("show-reply-form-<%= comment.id %>");
        
        // Show the reply form
        replyForm.style.display = "block";
        
        // Hide the reply button
        replyButton.style.display = "none";
    });

    document.getElementById("cancel-reply-form-<%= comment.id %>").addEventListener("click", function() {
        var replyForm = document.getElementById("reply-form-container-<%= comment.id %>");
        var replyButton = document.getElementById("show-reply-form-<%= comment.id %>");
        
        // Hide the reply form
        replyForm.style.display = "none";
        
        // Show the reply button again
        replyButton.style.display = "block";
    });
</script>
